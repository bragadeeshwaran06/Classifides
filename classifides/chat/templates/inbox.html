{% extends 'base.html' %}

{% load static %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-center mb-4">Inbox</h2>
    
    {% if conversations %}
        <ul class="list-group">
            {% for user, last_message in conversations %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <a href="{% url 'conversation' ad_id=last_message.ad.id user_id=user.id %}" class="text-decoration-none">
                        <strong>{{ user.username }}</strong>
                        <br>
                        <span class="text-muted">{{ last_message.content|truncatewords:10 }}</span>
                    </a>
                    <span class="badge badge-secondary">{{ last_message.timestamp|date:"M d, Y H:i" }}</span>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p class="text-center">No conversations yet. Start messaging!</p>
    {% endif %}
</div>
{% endblock %}
